{% extends 'base.html.twig' %}

{% block body %}
    <h1>Products list</h1>

    <div id="main" class="container">
        <table class="table">
            <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Category</th>
                <th>Manufacturer</th>
                <th>Price</th>
                <th>Slug</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for product in products %}
                <tr>
                    <td><a href="{{ path('_show', { 'id': product.id }) }}">{{ product.id }}</a></td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.category }}</td>
                    <td>{{ product.manufacturer }}</td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.slug }}</td>
                    <td>
                        <ul>
                            <li>
                                <a href="{{ path('_show', { 'id': product.id }) }}">show</a>
                            </li>
                            <li>
                                <a href="{{ path('_edit', { 'id': product.id }) }}">edit</a>
                            </li>
                        </ul>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <button class="btn btn-default" @click="showCreateModal = true">Create a new product</button>

        <modal v-show="showCreateModal" @close="showCreateModal = false">
            {#{{ include('product/form.html.twig') }}#}
            {{ render(controller('AppBundle:Product:new')) }}
            {#<div id="form">#}
                {#<form name="appbundle_product" @submit.prevent="onSubmit">#}
                    {#<div id="appbundle_product">#}
                        {#<div class="form-group">#}
                            {#<label for="appbundle_product_name" class="required">Name</label>#}
                            {#<input type="text"#}
                                   {#class="form-control"#}
                                   {#id="appbundle_product_name"#}
                                   {#name="appbundle_product[name]"#}
                                    {#required="required"#}
                                   {#v-model="name"#}
                                   {#maxlength="255">#}
                        {#</div>#}
                        {#<div class="form-group">#}
                            {#<label for="appbundle_product_category" class="required">Category</label>#}
                            {#<input type="text"#}
                                   {#class="form-control"#}
                                   {#id="appbundle_product_category"#}
                                   {#name="appbundle_product[category]"#}
                                    {#required="required"#}
                                   {#v-model="category"#}
                                   {#maxlength="255">#}
                        {#</div>#}
                        {#<div class="form-group">#}
                            {#<label for="appbundle_product_manufacturer" class="required">Manufacturer</label>#}
                            {#<input type="text"#}
                                   {#class="form-control"#}
                                   {#id="appbundle_product_manufacturer"#}
                                   {#name="appbundle_product[manufacturer]"#}
                                    {#required="required"#}
                                   {#v-model="manufacturer"#}
                                   {#maxlength="255">#}
                        {#</div>#}
                        {#<div class="form-group">#}
                            {#<label for="appbundle_product_price" class="required">Price</label>#}
                            {#<input type="text"#}
                                   {#class="form-control"#}
                                   {#id="appbundle_product_price"#}
                                   {#name="appbundle_product[price]"#}
                                    {#required="required"#}
                                   {#v-model="price"#}
                                   {#maxlength="255">#}
                        {#</div>#}
                        {#<div class="form-group">#}
                            {#<label for="appbundle_product_slug" class="required">Slug</label>#}
                            {#<input type="text"#}
                                   {#class="form-control"#}
                                   {#id="appbundle_product_slug"#}
                                   {#name="appbundle_product[slug]"#}
                                    {#required="required"#}
                                   {#v-model="slug"#}
                                   {#maxlength="255">#}
                        {#</div>#}
                        {#<input class="btn btn-success" type="hidden" id="appbundle_product__token" name="appbundle_product[_token]"#}
                               {#value="0p57uMg3NedagTg9UULnhJz_wS_RxJ0IxH-clkoLyr0"></div>#}
                    {#<input class="btn btn-success" @click="onSubmit" type="submit" value="Create">#}
                {#</form>#}
            {#</div>#}
        </modal>

    </div>
{% endblock %}

{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue"></script>
    <script src="{{ asset('includes/modal.js') }}"></script>
    <script src="{{ asset('includes/create.js') }}"></script>
{% endblock %}
